<Page x:Class="PoultryPOS.Views.SalesView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="clr-namespace:PoultryPOS.Views"
      Title="Sales - POS">

    <Page.Resources>
        <Style TargetType="ComboBox">
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
    </Page.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#2C3E50" Padding="15" Margin="0,0,0,20">
            <TextBlock Text="SALES - INVOICE ENTRY" FontSize="20" FontWeight="Bold" Foreground="White" HorizontalAlignment="Center"/>
        </Border>

        <Border Grid.Row="1" Background="#ECF0F1" Padding="15" Margin="0,0,0,20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Customer:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox Grid.Column="1" Name="cmbCustomer" Height="30" Width="200" HorizontalAlignment="Left" 
                              SelectionChanged="CmbCustomer_SelectionChanged" Margin="0,0,20,0"/>

                    <TextBlock Grid.Column="2" Text="Truck:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox Grid.Column="3" Name="cmbTruck" Height="30" Width="150" HorizontalAlignment="Left" Margin="0,0,20,0"/>

                    <TextBlock Grid.Column="4" Text="Driver:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox Grid.Column="5" Name="cmbDriver" Height="30" Width="150" HorizontalAlignment="Left" Margin="0,0,20,0"/>

                    <TextBlock Grid.Column="6" Name="lblCurrentBalance" Text="" FontWeight="Bold" Foreground="Red" 
                               VerticalAlignment="Center"/>
                </Grid>

                <Grid Grid.Row="1" Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Price per KG:" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBox Grid.Column="1" Name="txtPricePerKg" Height="30" Width="120" HorizontalAlignment="Left" 
                             TextChanged="TxtPricePerKg_TextChanged"/>
                </Grid>
            </Grid>
        </Border>

        <Border Grid.Row="2" Background="White" BorderBrush="#DDD" BorderThickness="1" Padding="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Button Grid.Row="0" Name="btnAddRow" Content="+ ADD NEW SALE ROW" Height="35" Width="200" 
                        Background="#27AE60" Foreground="White" FontWeight="Bold" HorizontalAlignment="Center" 
                        Margin="0,0,0,15" Click="BtnAddRow_Click"/>

                <DataGrid Grid.Row="1" Name="dgSaleItems" AutoGenerateColumns="False" CanUserAddRows="False"
                          HeadersVisibility="Column" GridLinesVisibility="Horizontal" AlternatingRowBackground="#F8F9FA"
                          CellEditEnding="DgSaleItems_CellEditEnding">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Gross (kg)" Width="120" Binding="{Binding GrossWeight, StringFormat=F2, UpdateSourceTrigger=PropertyChanged}"/>
                        <DataGridTextColumn Header="Cages" Width="100" Binding="{Binding NumberOfCages, UpdateSourceTrigger=PropertyChanged}"/>
                        <DataGridTextColumn Header="Single Cage Wt (kg)" Width="150" Binding="{Binding SingleCageWeight, StringFormat=F2, UpdateSourceTrigger=PropertyChanged}"/>
                        <DataGridTextColumn Header="Total Cage Wt (kg)" Width="150" Binding="{Binding TotalCageWeight, StringFormat=F2}" IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Background" Value="#F5F5F5"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Net (kg)" Width="120" Binding="{Binding NetWeight, StringFormat=F2}" IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Background" Value="#F5F5F5"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Total" Width="120" Binding="{Binding TotalAmount, StringFormat=C}" IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Background" Value="#F5F5F5"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTemplateColumn Header="Remove" Width="80">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="✕" Width="25" Height="25" Background="#E74C3C" Foreground="White" 
                                            BorderThickness="0" Click="BtnRemoveRow_Click"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <Border Grid.Row="3" Background="#ECF0F1" Padding="20" Margin="0,20,0,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Name="lblInvoiceTotal" Text="Invoice Total: $0.00 | Line Items: 0" 
                           FontSize="18" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,15"/>

                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Name="btnPayNow" Content="PAY NOW" Height="40" Width="120" Background="#27AE60" 
                            Foreground="White" FontWeight="Bold" Margin="0,0,15,0" Click="BtnPayNow_Click"/>
                    <Button Name="btnAddToAccount" Content="ADD TO ACCOUNT" Height="40" Width="140" Background="#E67E22" 
                            Foreground="White" FontWeight="Bold" Margin="0,0,15,0" Click="BtnAddToAccount_Click"/>
                    <Button Name="btnClearAll" Content="CLEAR ALL" Height="40" Width="120" Background="#95A5A6" 
                            Foreground="White" FontWeight="Bold" Click="BtnClearAll_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>